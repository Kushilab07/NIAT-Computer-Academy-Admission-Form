<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIAT Registration Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    
    <style>
      /* THEME: Ink Wash */
      body { font-family: 'Lato', sans-serif; background-color: #CBCBCB; margin: 0; padding: 40px 15px; color: #4A4A4A; }
      .container { max-width: 650px; margin: 0 auto; background: #FFFFE3; padding: 40px; border-radius: 4px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); border-top: 6px solid #6D8196; }
      
      /* --- HEADER BRANDING --- */
      .institute-header { text-align: center; border-bottom: 2px solid #6D8196; padding-bottom: 20px; margin-bottom: 30px; }
      .inst-name { font-family: 'Montserrat', sans-serif; font-size: 24px; font-weight: 800; color: #2c3e50; text-transform: uppercase; line-height: 1.3; margin-bottom: 5px; }
      .inst-iso { font-family: 'Lato', sans-serif; font-size: 14px; font-weight: bold; color: #c0392b; margin-bottom: 5px; }
      .inst-reg { font-family: 'Lato', sans-serif; font-size: 13px; color: #4A4A4A; font-weight: 600; }
      .inst-addr { font-family: 'Lato', sans-serif; font-size: 13px; color: #666; margin-top: 5px;}

      /* Section Headers */
      .section-header { 
        font-family: 'Montserrat', sans-serif; 
        color: #4A4A4A; 
        font-size: 18px; 
        font-weight: 700;
        text-transform: uppercase;
        border-bottom: 2px solid #CBCBCB; 
        padding-bottom: 5px; 
        margin-top: 35px; 
        margin-bottom: 20px; 
      }
      
      /* Input Styles */
      input, select, textarea { width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #CBCBCB; background-color: #FFFCF5; border-radius: 2px; box-sizing: border-box; font-family: 'Lato', sans-serif; transition: border-color 0.3s; }
      input::placeholder, textarea::placeholder { color: #999; } 
      input:focus, select:focus, textarea:focus { outline: none; border-color: #6D8196; border-width: 2px; }
      input[readonly] { background-color: #e9ecef; color: #4A4A4A; font-weight: bold; cursor: not-allowed; border: 1px dashed #ccc; }
      textarea { resize: vertical; height: 80px; }

      .row { display: flex; gap: 20px; } .col { flex: 1; }
      @media (max-width: 600px) { .row { flex-direction: column; gap: 0; } }
      .hidden { display: none; }
      
      /* Buttons */
      .btn-primary { width: 70%; background-color: #6D8196; color: #FFFFE3; border: none; padding: 16px; font-size: 18px; font-weight: bold; border-radius: 50px; cursor: pointer; font-family: 'Montserrat', sans-serif; margin-top: 10px;}
      .btn-google { background-color: #DB4437; color: white; margin-top: 30px; } 
      .btn-primary:disabled { background-color: #ccc; cursor: wait; }

      /* Pay Button */
      .pay-btn { display: block; width: 100%; text-align: center; background-color: #4A4A4A; color: #FFFFE3; text-decoration: none; padding: 15px; border-radius: 4px; font-weight: bold; margin-bottom: 20px; box-sizing: border-box; }

      /* Profile Box & Logout */
      .user-profile { 
        text-align: center; 
        margin-bottom: 20px; 
        padding: 15px; 
        background: rgba(109, 129, 150, 0.1); 
        border-radius: 4px; 
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .user-info { text-align: left; }
      .logout-btn {
        background: none;
        border: 1px solid #6D8196;
        color: #6D8196;
        padding: 5px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        font-weight: bold;
      }
      .logout-btn:hover { background: #6D8196; color: #fff; }

      /* Payment Options Styling */
      .payment-options { display: flex; gap: 20px; margin-bottom: 20px; justify-content: center; }
      .radio-label { 
        display: flex; align-items: center; cursor: pointer; font-weight: bold; background: white; padding: 1px 20px; border: 1px solid #CBCBCB; border-radius: 4px; flex: 1; justify-content: center; transition: all 0.3s ease;
      }
      .radio-label input { width: auto; margin-right: 8px; }
      
      /* Payment Icons Styling */
      .radio-label svg { 
          height: 24px; /* Fixed height */
          width: auto;  /* Width adjusts automatically */
          margin-left: 8px; /* Space between Text and Icon */
          vertical-align: middle;
      }
      
      .radio-label:hover { border-color: #6D8196; background-color: #F4F8FB; }

      /* Submit Button Animation */
      .submit-wrapper { display: flex; justify-content: center; margin-top: 40px; height: 60px; }
      #submit-btn { 
        position: relative; width: 150px; height: 50px; background: none; border: 4px solid #6D8196; color: #6D8196; border-radius: 50px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: width 0.3s ease, border-color 0.3s ease; font-family: 'Montserrat', sans-serif; font-size: 18px; font-weight: bold; letter-spacing: 1px; 
      }
      #submit-btn span, #submit-btn svg { position: absolute; transition: opacity 0.3s; }
      #submit-btn svg { opacity: 0; fill: transparent; width: 24px; height: 24px; }
      #submit-btn.loading { 
        width: 50px; border: 4px solid transparent; border-left: 4px solid #6D8196; border-bottom: 4px solid #6D8196; color: transparent; animation: spin 1s linear infinite; 
      }
      #submit-btn.loading span { opacity: 0; }
      #submit-btn.success { width: 50px; border-color: #28a745; background-color: #fff; }
      #submit-btn.success span { opacity: 0; }
      #submit-btn.success svg { opacity: 1; fill: #28a745; transition: fill 0.3s ease; }
      
      .serial-loader {
        border: 4px solid rgba(255, 255, 227, 0.3); border-top: 4px solid #FFFFE3; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; display: inline-block;
      }
      
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      .noselect { user-select: none; }
      .file-label { display: block; font-size: 0.85em; font-weight: bold; margin-bottom: 5px; color: #6D8196; }

    </style>
</head>
<body>

    <div class="container">
      
      <div class="institute-header">
        <div class="inst-name">NIAT Computer Academy &<br>Vocational Training Institute</div>
        <div class="inst-iso">AN ISO 9001:2015 CERTIFIED INSTITUTE</div>
        <div class="inst-reg">Regd. Under MSME Govt. of India (No-AS-23-0000097)</div>
        <div class="inst-addr">Branch: Arikuchi & Bagals Road Chowk, Nalbari</div>
      </div>

      <div id="login-section" style="text-align: center; padding: 40px 0;">
        <p>Please sign in with your Google Account to begin.</p>
        <button id="google-login-btn" class="btn-primary btn-google">Sign in with Google</button>
      </div>

      <div id="form-section" class="hidden">
        
        <h2 style="font-family:'Montserrat', sans-serif; text-align:center; margin-bottom:15px; color:#4A4A4A;">Registration Form</h2>

        <div class="user-profile">
            <div class="user-info">
              <span id="user-display-name" style="font-weight:bold;">User</span>
              <br><small style="color:#6D8196;">(Logged In)</small>
            </div>
            <button id="logout-btn-top" class="logout-btn">Sign Out</button>
        </div>

        <form id="admissionForm">
            <div class="section-header">1. Personal Information</div>
            <input type="text" name="studentName" placeholder="Student Name" required>
            <input type="text" name="fatherName" placeholder="Father's Name" required>
            <div class="row">
                <div class="col"><input type="email" id="email-field" name="email" placeholder="Email Address" readonly required title="This email is linked to your login"></div>
                <div class="col"><input type="tel" name="contact" placeholder="Contact Number" pattern="[0-9]{10}" required></div>
            </div>

            <div class="section-header">2. Address</div>
            <div class="row"><div class="col"><input type="text" name="village" placeholder="Village" required></div><div class="col"><input type="text" name="po" placeholder="Post Office" required></div></div>
            <div class="row"><div class="col"><input type="text" name="district" placeholder="District" required></div><div class="col"><input type="number" name="pin" placeholder="PIN Code" required></div></div>

            <div class="section-header">3. Education & Occupation</div>
            <input type="text" name="qualification" placeholder="Last Qualification" required>
            <input type="text" name="activity" placeholder="Present Activity" required>

            <div class="section-header">4. Select Course</div>
            
            <select name="course3m" class="course-select">
                <option value="">-- Three Month Course --</option>
                <option value="Basic Of Computer">Basic Of Computer</option>
                <option value="DTP">DTP</option>
                <option value="Tally Prime & Accounting">Tally Prime & Accounting</option>
                <option value="Advance Excel with MIS Report">Advance Excel with MIS Report</option>
                <option value="AI/ML using Python">AI/ML using Python</option>
                <option value="Digital Marketing">Digital Marketing</option>
                <option value="Communication skill & Personality Dev">Communication skill & Personality Dev</option>
                <option value="Office management with Google workspace">Office management with Google workspace</option>
                <option value="SDP(Skill Development Programme)">SDP(Skill Development Programme)</option>
            </select>
            
            <select name="course6m" class="course-select">
                <option value="">-- Six Month Course --</option>
                <option value="Diploma in Computer Application">Diploma in Computer Application</option>
                <option value="Advance Tally Prime with GST">Advance Tally Prime with GST</option>
                <option value="Diploma in Computer Application in Business (CAB)">Diploma in Computer Application in Business (CAB)</option>
                <option value="Personal Financial Literacy & Stock Market">Personal Financial Literacy & Stock Market</option>
                <option value="Back office Management & MIS Report">Back office Management & MIS Report</option>
                <option value="Data Analyst with Al Technology">Data Analyst with Al Technology</option>
            </select>
            
            <select name="course1y" class="course-select">
                <option value="">-- One Year Course --</option>
                <option value="Advance Diploma in Computer Application">Advance Diploma in Computer Application</option>
                <option value="Post Graduate Diploma in Computer Application">Post Graduate Diploma in Computer Application</option>
                <option value="Advance Diploma in Financial Accounting with Taxation">Advance Diploma in Financial Accounting with Taxation</option>
            </select>
            
            <select name="courseSp" class="course-select">
                <option value="">-- Special Course --</option>
                <option value="Advance Diploma in Computer Application with Al Technology">Advance Diploma in Computer Application with Al Technology</option>
                <option value="Diploma in Computer Teacher Training">Diploma in Computer Teacher Training</option>
                <option value="Master Diploma in Computer Application">Master Diploma in Computer Application</option>
            </select>

            <div class="section-header">5. Documents</div>
            <span class="file-label">Passport Sized Photo (less than 1MB)</span><input type="file" id="photoFile" accept="image/*" required>
            <span class="file-label">Last Qualification Document (less than 1MB)</span><input type="file" id="docFile" accept="image/*,.pdf" required>

            <div class="section-header">6. Payment</div>
            <p style="text-align:center; color:#4A4A4A; margin-bottom:5px; font-weight:bold;">
                Please pay admission fee  <span style="font-size: 1.4em; color: #2c3e50;">Rs 1000/-</span>  Only.
            </p>
            <p style="text-align:left; color:#6D8196; margin-top:15px; margin-bottom:5px; font-weight:bold; font-size: 0.85em;">
                Select Payment Mode
            </p>

            <div class="payment-options">
                <label class="radio-label">
                    <input type="radio" name="payMode" value="Online" checked>
                    <span>Online</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 466" id="upi"><path fill="#3d3d3c" d="M98.1 340.7h6.3l-5.9 24.5c-.9 3.6-.7 6.4.5 8.2 1.2 1.8 3.4 2.7 6.7 2.7 3.2 0 5.9-.9 8-2.7 2.1-1.8 3.5-4.6 4.4-8.2l5.9-24.5h6.4l-6 25.1c-1.3 5.4-3.6 9.5-7 12.2-3.3 2.7-7.7 4.1-13.1 4.1-5.4 0-9.1-1.3-11.1-4s-2.4-6.8-1.1-12.2l6-25.2zm31.4 40.3 10-41.9 19 24.6c.5.7 1 1.4 1.5 2.2.5.8 1 1.7 1.6 2.7l6.7-27.9h5.9l-10 41.8-19.4-25.1-1.5-2.1c-.5-.8-.9-1.5-1.2-2.4l-6.7 28h-5.9zm44.2 0 9.6-40.3h6.4l-9.6 40.3h-6.4zm15.5 0 9.6-40.3h21.9l-1.3 5.6h-15.5l-2.4 10H217l-1.4 5.7h-15.5l-4.5 18.9h-6.4zm29 0 9.6-40.3h6.4l-9.6 40.3h-6.4zm15.5 0 9.6-40.3h21.9l-1.3 5.6h-15.5l-2.4 10.1h15.5l-1.4 5.7h-15.5l-3.1 13H257l-1.4 5.9h-21.9zm29.3 0 9.6-40.3h8.6c5.6 0 9.5.3 11.6.9 2.1.6 3.9 1.5 5.3 2.9 1.8 1.8 3 4.1 3.5 6.8.5 2.8.3 6-.5 9.5-.9 3.6-2.2 6.7-4 9.5-1.8 2.8-4.1 5-6.8 6.8-2 1.4-4.2 2.3-6.6 2.9-2.3.6-5.8.9-10.4.9H263zm7.8-6h5.4c2.9 0 5.2-.2 6.8-.6 1.6-.4 3-1.1 4.3-2 1.8-1.3 3.3-2.9 4.5-4.9 1.2-1.9 2.1-4.2 2.7-6.8.6-2.6.8-4.8.5-6.7-.3-1.9-1-3.6-2.2-4.9-.9-1-2-1.6-3.5-2-1.5-.4-3.8-.6-7.1-.6h-4.6l-6.8 28.5zm59.7-12.1-4.3 18.1h-6l9.6-40.3h9.7c2.9 0 4.9.2 6.2.5 1.3.3 2.3.8 3.1 1.6 1 .9 1.7 2.2 2 3.8.3 1.6.2 3.3-.2 5.2-.5 1.9-1.2 3.7-2.3 5.3-1.1 1.6-2.4 2.9-3.8 3.8-1.2.7-2.5 1.3-3.9 1.6-1.4.3-3.6.5-6.4.5h-3.7zm1.7-5.4h1.6c3.5 0 6-.4 7.4-1.2 1.4-.8 2.3-2.2 2.8-4.2.5-2.1.2-3.7-.8-4.5-1.1-.9-3.3-1.3-6.6-1.3H335l-2.8 11.2zm40.1 23.5-2-10.4h-15.6l-7 10.4H341l29-41.9 9 41.9h-6.7zm-13.8-15.9h10.9l-1.8-9.2c-.1-.6-.2-1.3-.2-2-.1-.8-.1-1.6-.1-2.5-.4.9-.8 1.7-1.3 2.5-.4.8-.8 1.5-1.2 2.1l-6.3 9.1zm29.7 15.9 4.4-18.4-8-21.8h6.7l5 13.7c.1.4.2.8.4 1.4.2.6.3 1.2.5 1.8l1.2-1.8c.4-.6.8-1.1 1.2-1.6l11.7-13.5h6.4L399 362.5l-4.4 18.4h-6.4zm60.9-19.9c0-.3.1-1.2.3-2.6.1-1.2.2-2.1.3-2.9-.4.9-.8 1.8-1.3 2.8-.5.9-1.1 1.9-1.8 2.8l-15.4 21.5-5-21.9c-.2-.9-.4-1.8-.5-2.6-.1-.8-.2-1.7-.2-2.5-.2.8-.5 1.7-.8 2.7-.3.9-.7 1.9-1.2 2.9l-9 19.8h-5.9l19.3-42 5.5 25.4c.1.4.2 1.1.3 2 .1.9.3 2.1.5 3.5.7-1.2 1.6-2.6 2.8-4.4.3-.5.6-.8.7-1.1l17.4-25.4-.6 42h-5.9l.5-20zm10.6 19.9 9.6-40.3h21.9l-1.3 5.6h-15.5l-2.4 10.1h15.5l-1.4 5.7h-15.5l-3.1 13H483l-1.4 5.9h-21.9zm29.2 0 10-41.9 19 24.6c.5.7 1 1.4 1.5 2.2.5.8 1 1.7 1.6 2.7l6.7-27.9h5.9l-10 41.8-19.4-25.1-1.5-2.1c-.5-.8-.9-1.5-1.2-2.4l-6.7 28h-5.9zm65.1-34.8-8.3 34.7h-6.4l8.3-34.7h-10.4l1.3-5.6h27.2l-1.3 5.6H554zm6.7 26.7 5.7-2.4c.1 1.8.6 3.2 1.7 4.1 1.1.9 2.6 1.4 4.6 1.4 1.9 0 3.5-.5 4.9-1.6 1.4-1.1 2.3-2.5 2.7-4.3.6-2.4-.8-4.5-4.2-6.3-.5-.3-.8-.5-1.1-.6-3.8-2.2-6.2-4.1-7.2-5.9-1-1.8-1.2-3.9-.6-6.4.8-3.3 2.5-5.9 5.2-8 2.7-2 5.7-3.1 9.3-3.1 2.9 0 5.2.6 6.9 1.7 1.7 1.1 2.6 2.8 2.9 4.9l-5.6 2.6c-.5-1.3-1.1-2.2-1.9-2.8-.8-.6-1.8-.9-3-.9-1.7 0-3.2.5-4.4 1.4-1.2.9-2 2.1-2.4 3.7-.6 2.4 1.1 4.7 5 6.8.3.2.5.3.7.4 3.4 1.8 5.7 3.6 6.7 5.4 1 1.8 1.2 3.9.6 6.6-.9 3.8-2.8 6.8-5.7 9.1-2.9 2.2-6.3 3.4-10.3 3.4-3.3 0-5.9-.8-7.7-2.4-2-1.6-2.9-3.9-2.8-6.8zm47.1 8.1 9.6-40.3h6.4l-9.6 40.3h-6.4zm15.6 0 10-41.9 19 24.6c.5.7 1 1.4 1.5 2.2.5.8 1 1.7 1.6 2.7l6.7-27.9h5.9l-10 41.8-19.4-25.1-1.5-2.1c-.5-.8-.9-1.5-1.2-2.4l-6.7 28h-5.9zm65.1-34.8-8.3 34.7h-6.4l8.3-34.7h-10.4l1.3-5.6h27.2l-1.3 5.6h-10.4zm6.9 34.8 9.6-40.3h22l-1.3 5.6h-15.5l-2.4 10.1h15.5l-1.4 5.7h-15.5l-3.1 13h15.5l-1.4 5.9h-22zm39.5-18.1-4.3 18h-6l9.6-40.3h8.9c2.6 0 4.6.2 5.9.5 1.4.3 2.5.9 3.3 1.7 1 1 1.6 2.2 1.9 3.8.3 1.5.2 3.2-.2 5.1-.8 3.2-2.1 5.8-4.1 7.6-2 1.8-4.5 2.9-7.5 3.3l9.1 18.3h-7.2l-8.7-18h-.7zm1.6-5.1h1.2c3.4 0 5.7-.4 7-1.2 1.3-.8 2.2-2.2 2.7-4.3.5-2.2.3-3.8-.7-4.7-1-.9-3.1-1.4-6.3-1.4h-1.2l-2.7 11.6zm18.9 23.2 9.6-40.3h21.9l-1.3 5.6h-15.5l-2.4 10h15.5l-1.4 5.7h-15.5l-4.5 18.9h-6.4zm52.8 0-2-10.4h-15.6l-7 10.4h-6.7l29-41.9 9 41.9h-6.7zm-13.9-15.9h10.9l-1.8-9.2c-.1-.6-.2-1.3-.2-2-.1-.8-.1-1.6-.1-2.5-.4.9-.8 1.7-1.3 2.5-.4.8-.8 1.5-1.2 2.1l-6.3 9.1zm62.2-14.6c-1.4-1.6-3.1-2.8-4.9-3.5-1.8-.8-3.8-1.2-6.1-1.2-4.3 0-8.1 1.4-11.5 4.2-3.4 2.8-5.6 6.5-6.7 11-1 4.3-.6 7.9 1.4 10.8 1.9 2.8 4.9 4.2 8.9 4.2 2.3 0 4.6-.4 6.9-1.3 2.3-.8 4.6-2.1 7-3.8l-1.8 7.4c-2 1.3-4.1 2.2-6.3 2.8-2.2.6-4.4.9-6.8.9-3 0-5.7-.5-8-1.5s-4.2-2.5-5.7-4.5c-1.5-1.9-2.4-4.2-2.8-6.8-.4-2.6-.3-5.4.5-8.4.7-3 1.9-5.7 3.5-8.3 1.6-2.6 3.7-4.9 6.1-6.8 2.4-2 5-3.5 7.8-4.5s5.6-1.5 8.5-1.5c2.3 0 4.4.3 6.4 1 1.9.7 3.7 1.7 5.3 3.1l-1.7 6.7zm.6 30.5 9.6-40.3h21.9l-1.3 5.6h-15.5l-2.4 10.1h15.5l-1.4 5.7H868l-3.1 13h15.5L879 381h-21.9z"></path><path fill="#70706e" d="M740.7 305.6h-43.9l61-220.3h43.9l-61 220.3zM717.9 92.2c-3-4.2-7.7-6.3-14.1-6.3H462.6l-11.9 43.2h219.4l-12.8 46.1H481.8v-.1h-43.9l-36.4 131.5h43.9l24.4-88.2h197.3c6.2 0 12-2.1 17.4-6.3 5.4-4.2 9-9.4 10.7-15.6l24.4-88.2c1.9-6.6 1.3-11.9-1.7-16.1zm-342 199.6c-2.4 8.7-10.4 14.8-19.4 14.8H130.2c-6.2 0-10.8-2.1-13.8-6.3-3-4.2-3.7-9.4-1.9-15.6l55.2-198.8h43.9l-49.3 177.6h175.6l49.3-177.6h43.9l-57.2 205.9z"></path><path fill="#098041" d="M877.5 85.7 933 196.1 816.3 306.5z"></path><path fill="#e97626" d="M838.5 85.7 894 196.1 777.2 306.5z"></path></svg>
                </label>
                <label class="radio-label">
                    <input type="radio" name="payMode" value="Cash">
                    <span>Cash</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="money" width="24" height="24"><rect width="23" height="13" x=".5" y="5.5" fill="#a2e62e" rx="2"></rect><path fill="#8bc727" d="M2 14.5a2.45 2.45 0 0 0-1.5.5v1.5a2 2 0 0 0 2 2H4a2.45 2.45 0 0 0 .5-1.5A2.5 2.5 0 0 0 2 14.5zm0-5A2.45 2.45 0 0 1 .5 9V7.5a2 2 0 0 1 2-2H4A2.45 2.45 0 0 1 4.5 7 2.5 2.5 0 0 1 2 9.5zm20 5a2.45 2.45 0 0 1 1.5.51v1.49a2 2 0 0 1-2 2H20a2.45 2.45 0 0 1-.5-1.5 2.5 2.5 0 0 1 2.5-2.5zm0-5a2.45 2.45 0 0 0 1.5-.5V7.5a2 2 0 0 0-2-2H20a2.45 2.45 0 0 0-.5 1.5A2.5 2.5 0 0 0 22 9.5zm-4 3h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1zm-11 0H6a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1z"></path><path fill="none" stroke="#8bc727" stroke-linecap="round" stroke-linejoin="round" d="M9.5 8.5h5"></path><path fill="#8bc727" d="M14.5 10H14a2.5 2.5 0 0 0-2.5-2h-2a.5.5 0 0 0 0 1h2a1.51 1.51 0 0 1 1.41 1H9.5a.5.5 0 0 0 0 1h3.41a1.51 1.51 0 0 1-1.41 1h-2a.5.5 0 0 0-.46.31.47.47 0 0 0 .11.54l3 3a.47.47 0 0 0 .35.15h1a.5.5 0 0 0 0-1h-.79l-2-2h.79a2.5 2.5 0 0 0 2.5-2h.55a.5.5 0 0 0 0-1Z"></path></svg>
                </label>
            </div>
            
            <div id="online-payment-section">
                <a href="upi://pay?pa=indkiller192@oksbi&pn=Kushilab%20Deva%20Sarma&am=1&cu=INR&tn=Admission%20Fee" class="pay-btn">Click to Pay via UPI App</a>
                <span class="file-label">Upload Payment Screenshot (less than 1MB)</span>
                <input type="file" id="payFile" accept="image/*">
            </div>

            <div class="section-header">7. Additional Notes</div>
            <textarea name="notes" placeholder="Any message for the administrator? (Optional)"></textarea>

            <div class="submit-wrapper">
              <button type="submit" id="submit-btn" class="noselect">
                <span>SUBMIT</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 11c2.761.575 6.312 1.688 9 3.438 3.157-4.23 8.828-8.187 15-11.438-5.861 5.775-10.711 12.328-14 18.917-2.651-3.766-5.547-7.271-10-10.917z"/></svg>
              </button>
            </div>
        </form>
      </div>

      <div id="success-view" class="hidden" style="text-align:center;">
        <h2 style="color:#6D8196;">Thank you for enrolling.</h2>
        <p>Your Registration Number:</p>
        
        <div id="serial-display" style="background:#4A4A4A; color:#FFFFE3; padding:15px; font-size:32px; display:inline-block; margin:20px; min-width: 100px;">
          </div>
        
        <p>A confirmation email has been sent.</p>
        
        <button id="logout-btn-bottom" class="btn-primary" style="background:#4A4A4A; margin-top:30px;">Sign Out & Close</button>
      </div>

    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCWpp7vH0FAubDAW1Gvw5LMmtEqfMIq4u0",
        authDomain: "niat-admission-form.firebaseapp.com",
        projectId: "niat-admission-form",
        storageBucket: "niat-admission-form.firebasestorage.app",
        messagingSenderId: "907218345703",
        appId: "1:907218345703:web:57e6dd3d74baab2f190c42",
        measurementId: "G-YPCVGYS7L9"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();
      
      const loginBtn = document.getElementById('google-login-btn');
      const logoutBtnTop = document.getElementById('logout-btn-top');
      const logoutBtnBottom = document.getElementById('logout-btn-bottom');

      if(loginBtn) {
        loginBtn.addEventListener('click', () => {
          signInWithPopup(auth, provider).catch((error) => { alert("Login Failed: " + error.message); });
        });
      }

      const handleLogout = () => {
        signOut(auth).then(() => {
          document.getElementById('form-section').classList.add('hidden');
          document.getElementById('success-view').classList.add('hidden');
          document.getElementById('login-section').classList.remove('hidden');
          const form = document.getElementById('admissionForm');
          if(form) form.reset();
          document.getElementById('online-payment-section').classList.remove('hidden');
          const btn = document.getElementById('submit-btn');
          if(btn) {
              btn.classList.remove('loading', 'success');
              btn.disabled = false;
          }
        }).catch((error) => {
          alert("Error signing out: " + error.message);
        });
      };

      if(logoutBtnTop) logoutBtnTop.addEventListener('click', handleLogout);
      if(logoutBtnBottom) logoutBtnBottom.addEventListener('click', handleLogout);

      onAuthStateChanged(auth, (user) => {
        if (user) {
          document.getElementById('login-section').classList.add('hidden');
          if(document.getElementById('success-view').classList.contains('hidden')){
             document.getElementById('form-section').classList.remove('hidden');
          }
          const emailF = document.getElementById('email-field');
          const nameF = document.getElementById('user-display-name');
          if(emailF) emailF.value = user.email;
          if(nameF) nameF.innerText = user.displayName;
        } else {
          document.getElementById('login-section').classList.remove('hidden');
          document.getElementById('form-section').classList.add('hidden');
        }
      });
    </script>

    <script>
      const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby2PI0qFO1Hho0_x3srib57bQdZ0OVPGw09t0Qw0piZ0Bla367-gJuTdiZkTpIiHYwH/exec"; 
      const MAX_SIZE = 1 * 1024 * 1024; // 1MB Limit

      function checkFileSize(fileInput) {
        if(fileInput.files.length > 0) {
            if(fileInput.files[0].size > MAX_SIZE) {
                alert("File is too big! Max size is 1MB.");
                fileInput.value = ""; 
            }
        }
      }
      
      const photoF = document.getElementById('photoFile');
      const docF = document.getElementById('docFile');
      const payF = document.getElementById('payFile');

      if(photoF) photoF.addEventListener('change', function() { checkFileSize(this) });
      if(docF) docF.addEventListener('change', function() { checkFileSize(this) });
      if(payF) payF.addEventListener('change', function() { checkFileSize(this) });

      // --- PAYMENT MODE TOGGLE ---
      const payRadios = document.querySelectorAll('input[name="payMode"]');
      const onlineSection = document.getElementById('online-payment-section');
      
      payRadios.forEach(radio => {
          radio.addEventListener('change', function() {
              if(this.value === 'Online') {
                  onlineSection.classList.remove('hidden');
              } else {
                  onlineSection.classList.add('hidden');
              }
          });
      });

      const selects = document.querySelectorAll('.course-select');
      selects.forEach(select => {
        select.addEventListener('change', function() {
          if(this.value !== "") selects.forEach(other => { if(other !== this) other.value = ""; });
        });
      });

      // --- SUBMIT LOGIC ---
      const form = document.getElementById('admissionForm');
      if (form) {
          form.addEventListener('submit', function(e) {
            e.preventDefault(); 
            
            const payMode = document.querySelector('input[name="payMode"]:checked').value;
            
            if (payMode === 'Online') {
                const payFile = document.getElementById('payFile');
                if(payFile.files.length === 0) {
                    alert("Please upload the Payment Screenshot.");
                    return;
                }
            }

            var btn = document.getElementById('submit-btn');
            if(btn) {
                btn.disabled = true; 
                btn.classList.add('loading'); 
            }

            const filePromises = [
                getFileData('photoFile'), 
                getFileData('docFile'), 
                (payMode === 'Online') ? getFileData('payFile') : Promise.resolve({data:"", name:""})
            ];

            Promise.all(filePromises).then(files => {
                var formData = {
                    studentName: document.getElementsByName('studentName')[0].value,
                    fatherName: document.getElementsByName('fatherName')[0].value,
                    email: document.getElementById('email-field').value, 
                    contact: document.getElementsByName('contact')[0].value,
                    village: document.getElementsByName('village')[0].value,
                    po: document.getElementsByName('po')[0].value,
                    district: document.getElementsByName('district')[0].value,
                    pin: document.getElementsByName('pin')[0].value,
                    qualification: document.getElementsByName('qualification')[0].value,
                    activity: document.getElementsByName('activity')[0].value,
                    course3m: document.getElementsByName('course3m')[0].value,
                    course6m: document.getElementsByName('course6m')[0].value,
                    course1y: document.getElementsByName('course1y')[0].value,
                    courseSp: document.getElementsByName('courseSp')[0].value,
                    notes: document.getElementsByName('notes')[0].value, 
                    paymentMode: payMode, 
                    
                    photoData: files[0].data, photoName: files[0].name,
                    docData: files[1].data, docName: files[1].name,
                    payData: files[2].data, payName: files[2].name
                };

                const serialDisplay = document.getElementById('serial-display');
                if(serialDisplay) serialDisplay.innerHTML = '<div class="serial-loader"></div>';

                // --- START UPLOAD ---
                const uploadTask = fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify(formData)
                }).then(response => response.json());

                // --- START ANIMATION TIMER (2 Seconds) ---
                const timerTask = new Promise(resolve => setTimeout(resolve, 2000));

                timerTask.then(() => {
                    // STOP SPINNING, SHOW GREEN CHECK
                    if(btn) {
                        btn.classList.remove('loading');
                        btn.classList.add('success'); 
                    }

                    // WAIT 1 SECOND (To let user see the Green Check)
                    setTimeout(() => {
                        // NOW SWITCH PAGE
                        document.getElementById('form-section').classList.add('hidden');
                        document.getElementById('success-view').classList.remove('hidden');
                        
                        // HANDLE SERVER RESPONSE
                        uploadTask.then(data => {
                            if(data.status === 'success') {
                                if(serialDisplay) serialDisplay.textContent = data.serial;
                            } else {
                                handleError("Submission Failed: " + data.message);
                            }
                        }).catch(error => {
                            handleError("Network Error: " + error);
                        });
                    }, 1000); 
                });
            });
          });
      }

      function handleError(msg) {
        alert(msg);
        document.getElementById('success-view').classList.add('hidden');
        document.getElementById('form-section').classList.remove('hidden');
        var btn = document.getElementById('submit-btn');
        if(btn) {
            btn.disabled = false; 
            btn.classList.remove('loading');
            btn.classList.remove('success'); 
        }
      }

      function getFileData(id) {
        return new Promise(resolve => {
            var el = document.getElementById(id);
            if(!el || !el.files[0]) resolve({data:null, name:null});
            else {
                var file = el.files[0];
                var reader = new FileReader();
                reader.onload = e => resolve({data:e.target.result, name:file.name});
                reader.readAsDataURL(file);
            }
        });
      }
    </script>
</body>
</html>
